<%= link_to all_lists_path, class: "back-link" do %>
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="15 18 9 12 15 6"/>
  </svg>
  Back to all lists
<% end %>

<%= render @list %>

<div class="card">
  <div class="card-header">
    <h2>Meals</h2>
  </div>
  <% if @list.meals.any? %>
    <ul>
      <% @list.list_meals.includes(:meal).order(:date).group_by(&:date).each do |date, list_meals| %>
        <li>
          <strong><%= date.strftime("%A") %></strong>
          <ul>
            <% list_meals.each do |list_meal| %>
              <li><%= list_meal.meal.name %></li>
            <% end %>
          </ul>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-muted">No meals added to this list.</p>
  <% end %>
</div>

<div class="card">
  <div class="card-header">
    <h2>Items</h2>
  </div>
  <% if @list.items.any? %>
    <ul>
      <% @list.list_items.includes(:item).joins(:item).order('items.sort_order').each do |list_item| %>
        <li><%= list_item.item.name %> <span class="text-muted font-mono">(&times;<%= list_item.quantity %>)</span></li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-muted">No items added to this list.</p>
  <% end %>
</div>

<div class="list-detail-actions">
  <%= link_to "Edit List", edit_list_path(@list), class: "button button-secondary" %>
  <%= button_to "Delete List", @list, method: :delete, data: { turbo_confirm: "Are you sure you want to delete this list?" }, class: "button-danger" %>
</div>
