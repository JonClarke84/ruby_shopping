<div id="<%= dom_id(list_item) %>"
     class="list-item-card <%= 'list-item-ticked' if list_item.ticked %>"
     data-list-item-id="<%= list_item.id %>"
     data-list-id="<%= list_item.list_id %>"
     data-list-items-target="item"
     data-controller="list-item-edit">
  <div class="list-item-top">
    <div class="list-item-checkbox">
      <%= check_box_tag "ticked_#{list_item.id}", "1", list_item.ticked,
          data: {
            action: "change->list-items#toggle",
            list_item_id: list_item.id,
            list_id: list_item.list_id
          } %>
    </div>
    <div class="list-item-content">
      <div class="list-item-name">
        <%= list_item.item.name %>
        <span class="list-item-quantity-display" data-list-item-edit-target="display">
          Ã— <%= list_item.quantity %>
        </span>
        <span class="list-item-quantity-edit" data-list-item-edit-target="form" style="display: none;">
          Ã—
          <%= text_field_tag "quantity_#{list_item.id}", list_item.quantity,
              type: "number",
              min: 1,
              class: "quantity-input",
              data: {
                list_item_edit_target: "input",
                action: "blur->list-item-edit#save keydown->list-item-edit#handleKeydown"
              } %>
        </span>
      </div>
    </div>
  </div>
  <div class="list-item-actions">
    <%= button_tag "Edit",
        type: "button",
        class: "button-small",
        data: {
          action: "click->list-item-edit#edit",
          list_item_edit_target: "editButton"
        } %>
    <%= button_to "Remove", list_list_item_path(list_item.list_id, list_item), method: :delete, class: "button-small button-danger", form: { data: { turbo_confirm: "Remove this item from the list?" } } %>
  </div>
</div>
