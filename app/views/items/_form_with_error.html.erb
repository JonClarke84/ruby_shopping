<%= form_with model: [list, item], class: "add-item-form" do |form| %>
  <% if error %>
    <div class="auth-alert"><%= error %></div>
  <% end %>
  <div class="flex gap-2 mb-2">
    <div class="form-field" style="flex: 1; position: relative;" data-controller="autocomplete" data-autocomplete-url-value="<%= search_items_path %>" data-action="click@window->autocomplete#clickOutside">
      <%= form.label "Item name" %>
      <%= form.text_field "name", data: { autocomplete_target: "input", action: "input->autocomplete#search keydown->autocomplete#keydown" }, autocomplete: "off", name: "item[name_#{SecureRandom.hex(4)}]", id: "item_name_field" %>
      <%= form.hidden_field "name", id: "item_name_hidden" %>
      <div data-autocomplete-target="results" class="autocomplete-results"></div>
    </div>
    <div class="form-field" style="width: 100px;">
      <%= form.label "Qty" %>
      <%= form.number_field "quantity", min: 1, value: 1 %>
    </div>
  </div>
  <%= form.hidden_field "group_id", value: list.group_id %>
  <%= form.submit "Add item", class: "button button-block" %>
<% end %>
